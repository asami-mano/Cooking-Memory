{% extends 'base.html' %}
{% block content %}

<div>
  <div class="image-container" style="position: relative;">
    <img src="{{ record.image_url.url }}" alt="æ–™ç†å†™çœŸ" style="width: 100%; height: auto;">
    <a class="favorite-icon" style="position: absolute; top: 10px; right: 10px; font-size: 50px; background: none; border: none;">  
      {% if record.is_favorite %}
        â¤ï¸
      {% else %}
        ğŸ¤
      {% endif %}
    </a>
  </div>
</div>

<a href="{% url 'cooking_records:cooking_record_update' pk=record.pk %}" class="btn btn-primary">
  ç·¨é›†
</a>
<p>æ—¥ä»˜ï¼š{{ record.date }}</p>
<p>ã‚«ãƒ†ã‚´ãƒªï¼š{{ record.cooking_category.name }}</p>
<p>èª¿ç†ã®æ‰‹è»½ã•ï¼š
  {% if record.cooking_easiness == 0 %}ç°¡å˜
  {% elif record.cooking_easiness == 1 %}æ™®é€š
  {% else %}æ‰‹é–“ãŒã‹ã‹ã‚‹
  {% endif %}
</p>
<p>ãƒ¡ãƒ¢ï¼š{{ record.memo }}</p>

<div>
  <h3>å‚è€ƒãƒ¬ã‚·ãƒ”</h3>
  {% for cr_recipe in record.cooking_record_recipes.all %}
    <a href="{{ cr_recipe.recipe.recipe_url }}" target="_blank">{{ cr_recipe.recipe.name }}</a><br>
  {% endfor %}
</div>
<button id="deleteBtn" style="background-color: red; color: white; padding: 10px 20px; border: none; border-radius: 5px;">å‰Šé™¤</button>

<!-- ãƒ¢ãƒ¼ãƒ€ãƒ« -->
<div id="deleteModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5);">
  <div style="background: white; padding: 20px; margin: 100px auto; width: 300px; border-radius: 8px; text-align: center;">
    <p>ã“ã®æ–™ç†ãƒ¡ãƒ¢ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ</p>
    <form method="POST" action="{% url 'cooking_records:cooking_record_delete' record.pk %}">
      {% csrf_token %}
      <button type="submit" style="background-color: red; color: white; margin-right: 10px;">ã¯ã„</button>
      <button type="button" id="cancelBtn">ã„ã„ãˆ</button>
    </form>
  </div>
</div>

<script>
  const deleteBtn = document.getElementById('deleteBtn');
  const deleteModal = document.getElementById('deleteModal');
  const cancelBtn = document.getElementById('cancelBtn');

  deleteBtn.addEventListener('click', function() {
    deleteModal.style.display = 'block';
  });

  cancelBtn.addEventListener('click', function() {
    deleteModal.style.display = 'none';
  });
</script>

{% endblock  %}